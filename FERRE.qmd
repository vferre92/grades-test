---
title: "FERRE"
format: html
---

```{r}

#| false
here::i_am("grades-test.Rproj")
library(here)
library(dplyr)
library(tidyr)
library(ggplot2)
library(vroom)
library(gt)
library(readr)

```

### 1.1 Study organisation

#### Question 1 :  Load the course description file.

```{r}
courses <- vroom(here("data", "courses.csv"))
View(courses)

```
### Question 2 :

```{r}
courses |>
  arrange(course) |>
  gt::gt() |>
  tab_header(title = "Courses Data")

```


###  1.2 Students

####  Question 3

```{r}
students <- vroom(here("data", "students.csv"))
View(students)

```
```{r}
print(class(students$birth_date)) 
```
The variable "birth_date" is of class " `{r} print(class(students$birth_date))` "

```{r}
print(class(students$sex)) 
```

The variable "sex" is of class " `{r} print(class(students$sex))` "
Transformons la variable "sex" en *factor* :

```{r}
students <- students |>
  mutate(sex = factor(sex)) 
print(class(students$sex))
```
The variable "sex" is now of class " `{r} print(class(students$sex))` "*

####  Question 4

```{r}

grades <- vroom(here("data", "grades.csv"))
View(grades)

```
ProblÃ¨me d'encodage, changeons cela :

```{r}

grades <- vroom(here("data", "grades.csv"), delim = ":", na = "unknown")
View(grades)

```
#### Question 5

```{r}

students |>
  ggplot(aes(x = factor(group))) +
  geom_bar(fill = "steelblue") +
  labs(title = "Number of Students per Group", x = "Group", y = "Nb of Students") +
  geom_text(stat = 'count', aes(label = after_stat(count)), vjust = -0.5) +
  theme_bw() +
  theme(plot.title = element_text(hjust = 0.5)) +
  scale_x_discrete(breaks = c("1", "2", "3", "4", "5", "6", "7", "8", "9", "10", "11", "12", "13", "14", "15", "16", "17", "18"))

```

#### Question 6

```{r}

students |>
  ggplot(aes(x = group, fill = sex)) +
  geom_bar(position = "fill") +
  labs(title = "Gender Balance in Each Group", x = "Group Number", y = "Proportion of Students") +
  scale_fill_manual(values = c("lightgreen", "lightsalmon")) +
  theme_bw() +
  theme(plot.title = element_text(hjust = 0.5))

```

